{% load static %}
<link rel="stylesheet" href="{% static 'css/add_products.css' %}">

<div class="form-container">
    <h2>Add Bakery Product</h2>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <label for="name">Product Name:</label>
        <input type="text" id="name" name="name" required />

        <label for="price">Price:</label>
        <input type="number" id="price" name="price" step="0.01" required />

        <label>Weight:</label>
        <div id="weights-container">
            <div class="weight-group">
                <input type="text" name="weights[]" placeholder="Enter weight" required />
                <button type="button" onclick="addWeight()">+</button>
            </div>
        </div>

        <label for="image">Product Image:</label>
        <input type="file" id="image" name="image" accept="image/*" required />

        <label for="category">Category:</label>
        <select id="category" name="category" required>
            {% for category in categories %}
                <option value="{{ category.id }}">{{ category.name }}</option>
            {% endfor %}
        </select>

        <label for="description">Description:</label>
        <textarea id="description" name="description" rows="4" required></textarea>

        <!-- Submit -->
        <input type="submit" value="Add Product" />
    </form>
</div>

<script>
    function addWeight() {
        const container = document.getElementById('weights-container');
        const newWeight = document.createElement('div');
        newWeight.classList.add('weight-group');
        newWeight.innerHTML = `
            <input type="text" name="weights[]" placeholder="Enter weight" required />
            <button type="button" onclick="removeWeight(this)">-</button>
        `;
        container.appendChild(newWeight);
    }

    function removeWeight(button) {
        button.parentElement.remove();
    }
</script>
