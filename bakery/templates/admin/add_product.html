{% extends "admin/admin_base.html" %}
{% load static %}

{% block title %}Add Product | Admin Panel{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/admin_css/add_products.css' %}">

<div class="form-container">
    <h2>Add Bakery Product</h2>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Product Name -->
        <label for="name">Product Name:</label>
        <input type="text" id="name" name="name" required />

        <!-- Price -->
        <label for="price">Price:</label>
        <input type="number" id="price" name="price" step="0.01" required />

        <!-- Weights -->
        <label>Weight(s):</label>
        <div id="weights-container">
            <div class="weight-group">
                <input type="text" name="weights[]" placeholder="Enter weight (e.g. 250g, 1kg)" required />
                <button type="button" class="btn-add-weight">+</button>
            </div>
        </div>

        <!-- Category -->
        <label for="category">Category:</label>
        <div class="category-wrapper">
            <select id="category" name="category" required>
                <option value="">-- Select Category --</option>
                {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.category_name }}</option>
                {% endfor %}
            </select>
            <button type="button" id="btn-add_category">+ New Category</button>
        </div>

        <!-- Inline new category box -->
        <div id="category-input-box" class="inline-box" style="display:none;">
            <input type="text" id="new-category" placeholder="New category name" />
            <button type="button" id="btn-save-category">Save</button>
            <button type="button" id="btn-cancel-category">Cancel</button>
        </div>

        <!-- Subcategories -->
        <label>Subcategories (optional):</label>
        <div id="subcategory-container">
            <p class="hint">Select a category first</p>
        </div>

        <button type="button" id="btn-add_subcategory" disabled>+ New Subcategory</button>

        <!-- Inline new subcategory box -->
        <div id="subcategory-input-box" class="inline-box" style="display:none;">
            <input type="text" id="new-subcategory" placeholder="New subcategory name" />
            <button type="button" id="btn-save-subcategory">Save</button>
            <button type="button" id="btn-cancel-subcategory">Cancel</button>
        </div>

        <!-- Product Images -->
        <label>Product Images:</label>
        <div id="images-container">
            <div class="image-group">
                <input type="file" name="images[]" accept="image/*" required />
                <button type="button" onclick="addImage()">+</button>
            </div>
        </div>

        <!-- Description -->
        <label for="description">Description:</label>
        <textarea id="description" name="description" rows="4" required></textarea>

        <!-- Submit -->
        <input type="submit" value="Add Product" />
    </form>
</div>

<script src="{% static 'js/add_product.js' %}"></script>
{% endblock %}
