
{% load static %}
<link rel="stylesheet" href="{% static 'css/add_products.css' %}">

<div class="form-container">
    <h2>Add Bakery Product</h2>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Product Name -->
        <label for="name">Product Name:</label>
        <input type="text" id="name" name="name" required />

        <!-- Price -->
        <label for="price">Price:</label>
        <input type="number" id="price" name="price" step="0.01" required />

        <!-- Weights -->
        <label>Weight:</label>
        <div id="weights-container">
            <div class="weight-group">
                <input type="text" name="weights[]" placeholder="Enter weight" required />
                <button type="button" id="btn-add-weight">+</button>
            </div>
        </div>

        <!-- Category -->
        <label for="category">Category:</label>
        <div style="display:flex; flex-direction:column; gap:8px;">
            <div style="display:flex; gap:6px; align-items:center;">
                <select id="category" name="category" required>
                    <option value="">-- Select Category --</option>
                    {% for category in categories %}
                        <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select>
                <button type="button" id="btn-add_category">+ Add Category</button>
            </div>
            <div id="category-input-box" style="display:none; gap:6px; margin-top:6px;">
                <input type="text" id="new-category" placeholder="New category name" />
                <button type="button" id="btn-save-category">Save</button>
                <button type="button" id="btn-cancel-category">Cancel</button>
            </div>
        </div>

        <!-- Subcategory -->
        <label>Subcategories (optional):</label>
        <div id="subcategory-container">
            <p style="color:gray;">Select a category first</p>
        </div>
        <button type="button" id="btn-add_subcategory">+ Add Subcategory</button>
        <div id="subcategory-input-box" style="display:none; gap:6px; margin-top:6px;">
            <input type="text" id="new-subcategory" placeholder="New subcategory name" />
            <button type="button" id="btn-save-subcategory">Save</button>
            <button type="button" id="btn-cancel-subcategory">Cancel</button>
        </div>
        <label>Product Images:</label>
        <div id="images-container">
            <div class="image-group">
                <input type="file" name="images[]" accept="image/*" required />
                <button type="button" onclick="addImage()">+</button>
            </div>
        </div>

        <!-- Description -->
        <label for="description">Description:</label>
        <textarea id="description" name="description" rows="4" required></textarea>

        <!-- Submit -->
        <input type="submit" value="Add Product" />
    </form>
</div>

<script src="{% static 'js/add_product.js' %}"></script>