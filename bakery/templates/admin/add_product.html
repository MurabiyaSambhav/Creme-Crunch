{% extends "admin/admin_base.html" %}
{% load static %}

{% block title %}Add Product | Admin Panel{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/admin_css/add_products.css' %}">

<div class="form-container">
    <h2>Add Bakery Product</h2>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Product Name -->
        <label for="name">Product Name:</label>
        <input type="text" id="name" name="name" required />

        <!-- Weights + Prices -->
        <label>Weights & Prices:</label>
        <div id="weights-container">
            <div class="weight-group">
                <input type="text" name="weights[]" placeholder="Weight (e.g. 250g, 1kg)" required />
                <input type="number" name="weight_prices[]" placeholder="Price (â‚¹)" step="0.01" required />
                <button type="button" class="btn-add-weight">+</button>
            </div>
        </div>

        <!-- Category -->
        <label for="category">Category:</label>
        <div class="category-wrapper">
            <select id="category" name="category" required>
                <option value="">-- Select Category --</option>
                {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.category_name }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Subcategories -->
        <label for="subcategories">Subcategories:</label>
        <select id="subcategories" name="subcategories" multiple>
            <option value="">-- Select a category first --</option>
        </select>


        <div id="selected-subcategories" class="selected-tags"></div>

        <!-- Product Images -->
        <label>Product Images:</label>
        <div id="images-container">
            <div class="image-group">
                <input type="file" name="images[]" accept="image/*" required />
                <input type="radio" name="main_image" value="0" checked /> Main
                <button type="button" onclick="addImage()">+</button>
            </div>
        </div>

        <!-- Description -->
        <label for="description">Description:</label>
        <textarea id="description" name="description" rows="4" required></textarea>

        <!-- Submit -->
        <input type="submit" value="Add Product" />
    </form>
</div>

<script src="{% static 'js/add_product.js' %}"></script>
{% endblock %}
